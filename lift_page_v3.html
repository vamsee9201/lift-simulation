<!DOCTYPE html>
<html>
<head>
<style>

.floors {
    position: relative;
}

.floor {
    border-bottom: 1px solid #CBD5E1;
    height: 100px;
    display: flex;
}
.lift-buttons {
    width: 100px;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 1rem
}

.lift-buttons button {
    height: 2rem;
    width: 2rem;
    border-radius: 50%;
    cursor: pointer;
}

.lift-buttons .open-lift-btn {
    background-color: #C4B5FD;
    border: 1px solid #C4B5FD;
}

.lift-buttons .close-lift-btn {
    background-color: #D9F99D;
    border: 1px solid #D9F99D;
}
.lift-container {
    position: absolute;
    left: 30px;
    height: 100px;
    width: 70px;
    background-color: black;
    position: relative;
    z-index: 3;
    overflow: hidden;
}

.left-door {
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 50%;
    background-color: #94A3B8;
    border: 2px solid #475569;
    z-index: 1;

}

.right-door {
    position: absolute;
    top: 0;
    bottom: 0;
    right: 0;
    left: 50%;
    background-color: #94A3B8;
    border: 2px solid #475569;
    z-index: 1;
}

body {
    height: 100vh;
    margin: 0;
    padding: 0;
    font-family: 'Lora', serif;
}
.left-door-open {
    transform: translateX(-100%);
    transition: transform 2000ms ease-in-out;
}

.right-door-open {
    transform: translateX(100%);
    transition: transform 2000ms ease-in-out;
}

.left-door-close {
    transform: translateX(0%);
    transition: transform 2500ms ease-in-out;
}

.right-door-close {
    transform: translateX(-0%);
    transition: transform 2500ms ease-in-out;
}

</style>
</head>
<body>

    <div class="floors">
        <div class="floor" style="border-bottom: 1px solid gray">
            <div class="lift-buttons">
                <button class="call-lift-btn open-lift-btn" data-lift-num="0">
                    <i class="fa-solid fa-angle-up"></i>
                </button>
                <button class="call-lift-btn close-lift-btn" data-lift-num="0">
                    <i class="fa-solid fa-angle-down"></i>
                </button>
            </div>
            <!-- <div class="lift-container">

                <div class="left-door">

                </div>
                <div class="right-door">

                </div>
            </div> -->
        </div>
    </div>
    <button id="testButton">test button</button>


<script>

const urlParams = new URLSearchParams(window.location.search);

// Access specific parameters by their name
const floors = urlParams.get('floors');
const lifts = urlParams.get('lifts');

function getFloorEl(floorNum) {
    const floorEl = document.createElement("div");
    floorEl.classList.add("floor");
    floorEl.innerHTML += ` <div class="lift-buttons">
                      <button class="call-lift-btn open-lift-btn" data-lift-num="${floorNum}">
                          <i class="fa-solid fa-angle-up"></i>
                      </button>
                      <button class="call-lift-btn close-lift-btn" data-lift-num="${floorNum}">
                          <i class="fa-solid fa-angle-down"></i>
                      </button>
                  </div>`;
    return floorEl;
}

function getLiftEl(liftDistance) {
  //const liftDistance = (lifts.length + 1) * 120;

  const liftEL = document.createElement("div");
  liftEL.classList.add("lift-container");
  liftEL.style.position = "absolute";
  liftEL.style.left = `${liftDistance}px`;

  liftEL.innerHTML += `
            <div class="left-door">
            </div>
            <div class="right-door">
            </div>
        `;

  return liftEL;
}

function addFloor(floorNum) {
    const floorsContainer = document.querySelector(".floors");
    floorsContainer.prepend(getFloorEl(floorNum));
}

function addLift(liftDistance) {
    let floors = document.querySelectorAll(".floor");
    floors[floors.length - 1].append(getLiftEl(liftDistance));
    //liftEls = document.querySelectorAll(".lift-container");
}

for (let f = 1; f <= floors - 1; f++) {
    addFloor(f);
}

for (let l = 1; l <= lifts; l++) {
    addLift(l * 120);
}


let button = document.getElementById('testButton');

// have to test open and close doors
let leftDoors = document.querySelectorAll(".left-door");
let rightDoors = document.querySelectorAll(".right-door");

function openLift(index) {
    //buttons.disabled = true;
    console.log("open called")
  rightDoors[index].classList.add("right-door-open");
  leftDoors[index].classList.add("left-door-open");

  rightDoors[index].classList.remove("right-door-close");
  leftDoors[index].classList.remove("left-door-close");
}

function closeLift(index) {
    console.log("close called")
    rightDoors[index].classList.add("right-door-close");
  leftDoors[index].classList.add("left-door-close");

  rightDoors[index].classList.remove("right-door-open");
  leftDoors[index].classList.remove("left-door-open");
  //buttons.disabled = false;

}

function openCloseLift(index) {
    console.log("open close called")
    openLift(index);
  setTimeout(() => {
    closeLift(index);
  }, 3000);
}

// Define a function that will run when the button is clicked
function buttonClicked() {
    const distance = 4;
let liftsAll = document.querySelectorAll(".lift-container");
lift = liftsAll[0]
lift.style.transform = `translateY(${4 * 100 * -1}%)`;
lift.style.transition = `transform ${1500 * distance}ms ease-in-out`;

setTimeout(() => {
    openCloseLift(0);
  }, distance * 1500 + 1000);
//close(0);
}

// Wire the button to the action using addEventListener
button.addEventListener('click', buttonClicked);






















</script>
</body>


</html>